<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Invoxia – Analytics Dashboard</title>

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">

  <!-- Custom CSS -->
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/analytic.css') }}">
</head>
<body>

<!-- NAVBAR -->
<nav class="navbar navbar-expand-lg navbar-dark shadow-sm aksor-navbar">
  <div class="container">
    <a class="navbar-brand fw-bold" href="/">Invoxia</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav ms-auto text-center">
        <li class="nav-item">
          <a class="nav-link active" href="/">Dashboard</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/upload">Upload Invoice</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/analytic">Analytics</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/pricing">Pricing</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/about">About Us</a>
        </li>
      </ul>
    </div>
  </div>
</nav>

<!-- HERO -->
<section class="pricing-hero text-center text-white d-flex align-items-center">
  <div class="container">
    <h1 class="fw-bold">Your Spending at a Glance</h1>
    <p class="lead mt-3">
      Smart insights from all your uploaded invoices
    </p>
  </div>
</section>
<section>
  <!-- Decorative Floating Icons -->
  <img src="{{ url_for('static', filename='images/floating_invoice.png') }}" class="floating-icon top-0 start-0">
  <img src="{{ url_for('static', filename='images/floating_money.png') }}" class="floating-icon bottom-0 end-0">
</section>

<!-- METRICS -->
<section class="container mb-5">
  <div class="row g-4">

    <div class="col-md-6 col-lg-3">
      <div class="metric-card glass text-center p-4 premium-plan">
        <div class="icon-circle mb-3 bg-white shadow-sm">
          <i class="bi bi-file-text-fill text-warning display-5"></i>
        </div>
        <h6 class="text-uppercase opacity-75 mb-1">Invoices Processed</h6>
        <h2 class="fw-semi-bold countup">{{ invoice_count }}</h2>
      </div>
    </div>

    <div class="col-md-6 col-lg-3">
      <div class="metric-card glass text-center p-4 premium-plan">
        <div class="icon-circle mb-3 bg-white shadow-sm">
          <i class="bi bi-currency-dollar text-warning display-5"></i>
        </div>
        <h6 class="text-uppercase opacity-75 mb-1">Total Amount</h6>
        <h2 class="fw-semi-bold countup">${{ total_amount }}</h2>
      </div>
    </div>

    <div class="col-md-6 col-lg-3">
      <div class="metric-card glass text-center p-4 premium-plan">
        <div class="icon-circle mb-3 bg-white shadow-sm">
          <i class="bi bi-hourglass-split text-warning display-5"></i>
        </div>
        <h6 class="text-uppercase opacity-75 mb-1">Pending Invoices</h6>
        <h2 class="fw-semi-bold countup">{{ pending_count }}</h2>
      </div>
    </div>

    <div class="col-md-6 col-lg-3">
      <div class="metric-card glass text-center p-4 premium-plan">
        <div class="icon-circle mb-3 bg-white shadow-sm">
          <i class="bi bi-speedometer2 text-warning display-5"></i>
        </div>
        <h6 class="text-uppercase opacity-75 mb-1">Avg. Processing Time</h6>
        <h2 class="fw-semi-bold countup">{{ avg_processing_time }} sec</h2>
      </div>
    </div>

  </div>
</section>

<!-- RECENT INVOICES TABLE -->
<section class="container mb-5">
  <div class="card shadow-lg rounded-4 border-0 table-card">
    <div class="card-body p-4">
      <h4 class="fw-bold mb-3">Recent Uploaded Invoices</h4>
      <div class="table-responsive">
        <table class="table modern-table align-middle">
          <thead>
            <tr>
              <th>Invoice ID</th>
              <th>Vendor</th>
              <th>Date</th>
              <th>Amount</th>
              <th>Status</th>
            </tr>
          </thead>
          <tbody>
            {% for invoice in recent_invoices %}
            <tr>
              <td>#{{ invoice.id }}</td>
              <td>{{ invoice.vendor }}</td>
              <td>{{ invoice.date }}</td>
              <td>${{ invoice.total }}</td>
              <td>
                {% if invoice.status == 'Processed' %}
                  <span class="badge bg-success">Processed</span>
                {% else %}
                  <span class="badge bg-warning text-dark">Pending</span>
                {% endif %}
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </div>
</section>

<!-- FOOTER -->
<footer class="footer mt-5 py-4 bg-dark text-white">
  <div class="container">
    <div class="row text-center text-md-start">
      <div class="col-md-3 mb-3">
        <h5>Invoxia</h5>
        <p>Smart invoice digitization & finance tracker powered by AI.</p>
      </div>
      <div class="col-md-3 mb-3">
        <h5>Contact</h5>
        <p>Email: support@invoxia.com</p>
        <p>Location: Phnom Penh, Cambodia</p>
      </div>
      <div class="col-md-3 mb-3">
        <h5>Follow Us</h5>
        <p>Facebook</p>
        <p>LinkedIn</p>
        <p>Instagram</p>
      </div>
      <div class="col-md-3 mb-3">
        <h5>Stay Updated</h5>
        <input type="email" class="form-control mb-2" placeholder="Enter your email">
        <button class="btn btn-light w-100">Subscribe</button>
      </div>
    </div>
    <div class="text-center mt-4">
      © 2025 Invoxia — All Rights Reserved
    </div>
  </div>
</footer>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<!-- CountUp.js for animated metrics -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/countup.js/2.2.0/countUp.min.js"></script>
<script>
  document.querySelectorAll('.countup').forEach(el => {
    new CountUp(el, parseFloat(el.innerText.replace(/[$,]/g,''))).start();
  });
</script>
</body>
</html>
